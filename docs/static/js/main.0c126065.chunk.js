/*! For license information please see main.0c126065.chunk.js.LICENSE.txt */
(this["webpackJsonpreact-lizzie"]=this["webpackJsonpreact-lizzie"]||[]).push([[0],{18:function(t,e,n){t.exports=n(26)},24:function(t,e,n){},25:function(t,e,n){},26:function(t,e,n){"use strict";n.r(e);var i=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function a(t,e){navigator.serviceWorker.register(t).then((function(t){t.onupdatefound=function(){var n=t.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://bit.ly/CRA-PWA."),e&&e.onUpdate&&e.onUpdate(t)):(console.log("Content is cached for offline use."),e&&e.onSuccess&&e.onSuccess(t)))})}})).catch((function(t){console.error("Error during service worker registration:",t)}))}var r=n(0),o=n.n(r),s=n(16),c=n(1),l=n(3),u=n.n(l),h=n(6),d=n(2),v=n(4),f=n(13),p=n(12),y=n(10);var b=function(t){var e={width:t.width,height:"15px",borderStyle:"solid",borderWidth:"1px",borderColor:"black",marginBottom:"5px"},n={float:"left",textAlign:"center",color:"white",width:"".concat(t.blackPercent,"%"),height:"100%",backgroundColor:"black"},i={float:"left",textAlign:"center",width:"".concat(100-t.blackPercent,"%"),height:"100%"};return o.a.createElement("div",{style:e},o.a.createElement("div",{style:n},t.blackInfo),o.a.createElement("div",{style:i},t.whiteInfo))},k=n(5),m=n(11),g=(n(24),n(7)),w=n(14),O=n(17),A=n.n(O);function j(t){return 1===t?2:1}function E(t){var e=t.charCodeAt(0);return[(e<"I".charCodeAt(0)?e+1:e)-"A".charCodeAt(0),parseInt(t.slice(1))]}function S(t,e){return["@","A","B","C","D","E","F","G","H","J","K","L","M","N","O","P","Q","R","S","T"][t]+e}var x=function(){function t(e){Object(d.a)(this,t),this.BOARD_SIZE=void 0,this.BOARD_SIZE2=void 0,this.value=void 0,this.marks=void 0,this.BOARD_SIZE=e,this.BOARD_SIZE2=e*e,this.value=0,this.marks=new Int32Array(this.BOARD_SIZE2)}return Object(v.a)(t,[{key:"clear",value:function(){this.value+=1}},{key:"isMarked",value:function(t){return this.marks[t]===this.value}},{key:"mark",value:function(t){this.marks[t]=this.value}}]),t}(),z=[[],[],[[16,4],[4,16]],[[16,4],[4,16],[16,16]],[[16,4],[4,16],[16,16],[4,4]],[[16,4],[4,16],[16,16],[4,4],[10,10]],[[16,4],[4,16],[16,16],[4,4],[16,10],[4,10]],[[16,4],[4,16],[16,16],[4,4],[16,10],[4,10],[10,10]],[[16,4],[4,16],[16,16],[4,4],[16,10],[4,10],[10,4],[10,16]],[[16,4],[4,16],[16,16],[4,4],[16,10],[4,10],[10,4],[10,16],[10,10]]],C=function(){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(Object(d.a)(this,t),this.BOARD_SIZE=void 0,this.BOARD_SIZE2=void 0,this.turn=void 0,this.state=void 0,this.ko=void 0,this.recent8=void 0,this.marker1=void 0,this.marker2=void 0,this.BOARD_SIZE=e,this.BOARD_SIZE2=e*e,this.state=(n={},Object(w.a)(n,1,new Float32Array(this.BOARD_SIZE2)),Object(w.a)(n,2,new Float32Array(this.BOARD_SIZE2)),n),this.recent8=[],this.marker1=new x(e),this.marker2=new x(e),i>1){var a,r=Object(c.a)(z[i]);try{for(r.s();!(a=r.n()).done;){var o=a.value;this.setState(this.xyToPoint(o[0],o[1]),1)}}catch(s){r.e(s)}finally{r.f()}this.turn=2}else this.turn=1;this.ko=void 0}return Object(v.a)(t,null,[{key:"copy",value:function(e){var n=new t(e.BOARD_SIZE,0);return n.state[1].set(e.state[1]),n.state[2].set(e.state[2]),n.turn=e.turn,n.ko=e.ko,n}},{key:"fromSgf",value:function(t){for(var e=A.a.fastParse(t),n=Object(k.a)(e,1)[0],i=new this(parseInt(n.SZ||"19")),a=n;a._children.length>0;){var r=void 0;if(null!=(a=a._children[0]).B)r=a.B;else{if(null==a.W)continue;r=a.W}var o=i.moveToXy(r);-1===o?i.play(-1):i.play(i.xyToPoint.apply(i,o))}return i}}]),Object(v.a)(t,[{key:"moveToXy",value:function(t){if(""===t)return-1;var e="a".charCodeAt(0)-1;return[t.charCodeAt(0)-e,this.BOARD_SIZE-(t.charCodeAt(1)-e)+1]}},{key:"opponent",value:function(){return j(this.turn)}},{key:"switchTurn",value:function(){this.turn=j(this.turn)}},{key:"getState",value:function(t){return 1===this.state[1][t]?1:1===this.state[2][t]?2:0}},{key:"setState",value:function(t,e){0===e?(this.state[1][t]=0,this.state[2][t]=0):this.state[e][t]=1}},{key:"removeString",value:function(t){var e,n=Object(c.a)(t.points);try{for(n.s();!(e=n.n()).done;){var i=e.value;this.setState(i,0)}}catch(a){n.e(a)}finally{n.f()}}},{key:"captureBy",value:function(t){var e,n=this.opponent(),i=[],a=Object(c.a)(this.adjacenciesAt(t));try{for(a.s();!(e=a.n()).done;){var r=e.value;if(this.getState(r)===n){var o=this.stringAt(r);null!=o&&0===o.liberties.length&&(this.removeString(o),i.push.apply(i,o.points))}}}catch(s){a.e(s)}finally{a.f()}return i}},{key:"stringAt",value:function(t){var e=this.getState(t);if(0!==e){var n=j(e),i=new I;this.marker1.clear(),this.marker2.clear(),i.points.push(t),this.marker2.mark(t);for(var a=0;a<i.points.length;a++){var r=i.points[a];if(!this.marker1.isMarked(r)){this.marker1.mark(r);var o,s=Object(c.a)(this.adjacenciesAt(r));try{for(s.s();!(o=s.n()).done;){var l=o.value;if(!this.marker1.isMarked(l)){var u=this.getState(l);u===e?this.marker2.isMarked(l)||(i.points.push(l),this.marker2.mark(l)):(this.marker1.mark(l),u===n?i.opponents.push(l):i.liberties.push(l))}}}catch(h){s.e(h)}finally{s.f()}}}return i}}},{key:"putRecent8",value:function(t){this.recent8.unshift(t),this.recent8.length>8&&this.recent8.pop()}},{key:"play",value:function(t){if(-1===t)return this.putRecent8(t),this.switchTurn(),{turn:this.turn,point:t,ko:this.ko,captives:[],string:new I};if(t!==this.ko&&0===this.getState(t)){this.setState(t,this.turn);var e=this.captureBy(t),n=this.stringAt(t),i=n.liberties.length;if(0!==i){var a=this.ko;1===e.length&&1===i&&1===n.points.length?this.ko=n.liberties[0]:this.ko=void 0,this.putRecent8(t);var r=this.turn;return this.switchTurn(),{turn:r,point:t,ko:a,captives:e,string:n}}this.setState(t,0)}}},{key:"undoPlay",value:function(t){if(this.ko=t.ko,this.switchTurn(),-1!==t.point){this.setState(t.point,0);var e,n=j(t.turn),i=Object(c.a)(t.captives);try{for(i.s();!(e=i.n()).done;){var a=e.value;this.setState(a,n)}}catch(r){i.e(r)}finally{i.f()}}}},{key:"isLegal",value:function(t){var e=this.play(t);return!!e&&(this.undoPlay(e),!0)}},{key:"xyToPoint",value:function(t,e){return t-1+(e-1)*this.BOARD_SIZE}},{key:"pointToXy",value:function(t){var e=Math.floor(t/this.BOARD_SIZE);return[t-e*this.BOARD_SIZE+1,e+1]}},{key:"adjacenciesAt",value:function(t){for(var e=this.pointToXy(t),n=[],i=0,a=[[0,-1],[-1,0],[1,0],[0,1]];i<a.length;i++){var r=a[i],o=e[0]+r[0],s=e[1]+r[1];o>=1&&o<=this.BOARD_SIZE&&s>=1&&s<=this.BOARD_SIZE&&n.push(this.xyToPoint(o,s))}return n}},{key:"diagonalsAt",value:function(t){for(var e=this.pointToXy(t),n=[],i=0,a=[[-1,-1],[-1,1],[1,-1],[1,-1]];i<a.length;i++){var r=a[i],o=e[0]+r[0],s=e[1]+r[1];o>=1&&o<=this.BOARD_SIZE&&s>=1&&s<=this.BOARD_SIZE&&n.push(this.xyToPoint(o,s))}return n}},{key:"canEscape",value:function(t){if(t.liberties.length>1)return!0;var e,n=Object(c.a)(t.opponents);try{for(n.s();!(e=n.n()).done;){var i=e.value,a=this.stringAt(i);if(1===a.liberties.length){var r=this.play(a.liberties[0]);if(!r)continue;var o=this.stringAt(t.points[0]);if(2===o.liberties.length){var s,l=Object(c.a)(o.liberties);try{for(l.s();!(s=l.n()).done;){var u=s.value,h=this.play(u);if(h){var d=this.canEscape(this.stringAt(o.points[0]));if(this.undoPlay(h),!d)return this.undoPlay(r),!1}}}catch(g){l.e(g)}finally{l.f()}return this.undoPlay(r),!0}return this.undoPlay(r),o.liberties.length>2}}}catch(g){n.e(g)}finally{n.f()}var v=this.play(t.liberties[0]);if(null==v)return!1;if(null!=v.string&&2===v.string.liberties.length){var f,p=Object(c.a)(v.string.liberties);try{for(p.s();!(f=p.n()).done;){var y=f.value,b=this.play(y);if(b){var k=this.stringAt(t.points[0]),m=this.canEscape(k);if(this.undoPlay(b),!m)return this.undoPlay(v),!1}}}catch(g){p.e(g)}finally{p.f()}return this.undoPlay(v),!0}return this.undoPlay(v),1!==v.string.liberties.length}},{key:"likeEye",value:function(t){var e=this;if(0!==this.getState(t))return!1;var n=this.adjacenciesAt(t);return!!n.every((function(t){return e.getState(t)===e.turn}))&&n.every((function(t){return e.stringAt(t).liberties.length>1}))}},{key:"isEyeOfTurn",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!this.likeEye(t))return!1;var n,i=0,a=4===this.adjacenciesAt(t).length?1:0,r=j(this.turn),o=Object(c.a)(this.diagonalsAt(t));try{for(o.s();!(n=o.n()).done;){var s=n.value;if(this.getState(s)===r?i+=1:0===this.getState(s)&&e.indexOf(s)<0&&(e.push(t),this.isEyeOfTurn(s,e)||(i+=1),e.pop()),i>a)return!1}}catch(l){o.e(l)}finally{o.f()}return!0}},{key:"isFalseEye",value:function(t){return this.likeEye(t)&&!this.isEyeOfTurn(t)}},{key:"toString",value:function(){for(var t="",e=1;e<=this.BOARD_SIZE;e++){for(var n=1;n<=this.BOARD_SIZE;n++)switch(this.getState(this.xyToPoint(n,e))){case 0:t+=".";break;case 1:t+="X";break;case 2:t+="O"}t+="\n"}return t}}]),t}(),I=function t(){Object(d.a)(this,t),this.points=void 0,this.liberties=void 0,this.opponents=void 0,this.points=[],this.liberties=[],this.opponents=[]},B=C,M=function t(){Object(d.a)(this,t),this.stone=void 0,this.number=void 0,this.winrate=void 0,this.playouts=void 0,this.fillColor=void 0,this.borderWidth=void 0,this.borderColor=void 0,this.backgroundColor=void 0,this.stone=void 0,this.number=void 0,this.winrate=void 0,this.playouts=void 0,this.fillColor=void 0,this.borderWidth=void 0,this.borderColor=void 0,this.backgroundColor=void 0};function T(t,e,n){var i,a,r,o,s,c,l,u;switch(c=n*(1-e),l=n*(1-(s=6*t-(o=Math.floor(6*t)))*e),u=n*(1-(1-s)*e),o%6){case 0:i=n,a=u,r=c;break;case 1:i=l,a=n,r=c;break;case 2:i=c,a=n,r=u;break;case 3:i=c,a=l,r=n;break;case 4:i=u,a=c,r=n;break;default:i=n,a=c,r=l}return{r:Math.round(255*i),g:Math.round(255*a),b:Math.round(255*r)}}function P(t,e,n){var i,a=Math.max(t,e,n),r=Math.min(t,e,n),o=a-r,s=0===a?0:o/a,c=a/255;switch(a){case r:i=0;break;case t:i=e-n+o*(e<n?6:0),i/=6*o;break;case e:i=n-t+2*o,i/=6*o;break;default:i=t-e+4*o,i/=6*o}return{h:i,s:s,v:c}}function _(t){for(var e=new Array(t.BOARD_SIZE2),n=0;n<e.length;n++){var i=new M;switch(t.getState(n)){case 1:i.stone="B";break;case 2:i.stone="W"}e[n]=i}return e}function R(t,e){var n=[];if(t<=e)for(var i=t;i<=e;i++)n.push(i);else for(var a=t;a>=e;a--)n.push(a);return n}var D=function(t){Object(p.a)(n,t);var e=Object(y.a)(n);function n(t){var i;return Object(d.a)(this,n),(i=e.call(this,t)).state={},i}return Object(v.a)(n,[{key:"index",value:function(t,e){return this.props.w*(e-1)+t-1}},{key:"renderIntersection",value:function(t,e,n){var i=this,a=t[this.index(e,n)];return o.a.createElement(W,{key:"".concat(e,"-").concat(n),onClick:function(){return i.props.onClickIntersection(e,n)},onMouseEnter:function(){return i.onMouseEnterIntersection(e,n)},onMouseLeave:function(){return i.onMouseLeaveIntersection(e,n)},stone:a.stone,number:a.number,winrate:a.winrate,playouts:a.playouts,fillColor:a.fillColor,borderWidth:a.borderWidth,borderColor:a.borderColor,backgroundColor:a.backgroundColor})}},{key:"render",value:function(){var t,e,n=this;this.state.candidate&&null!=(e=this.props.candidates.find((function(t){return t.move===n.state.candidate})))&&(t=function(t,e){var n,i=B.copy(t),a=Object(c.a)(e.pv);try{for(a.s();!(n=a.n()).done;){var r=n.value;i.play(i.xyToPoint.apply(i,E(r)))}}catch(p){a.e(p)}finally{a.f()}var o=_(i),s=t.turn,l=o[i.xyToPoint.apply(i,E(e.move))];l.winrate=e.winrate.toFixed(1),l.playouts=e.visits,l.textColor=1===s?"white":"black";var u=2;s=j(s);var h,d=Object(c.a)(e.pv.slice(1));try{for(d.s();!(h=d.n()).done;){var v=h.value,f=o[i.xyToPoint.apply(i,E(v))];f.number=u,f.textColor=1===s?"white":"black",s=j(s),u++}}catch(p){d.e(p)}finally{d.f()}return o}(this.props.model,e)),null==e&&(t=_(this.props.model),this.props.candidates&&function(t,e,n){var i,a,r=Math.max.apply(Math,Object(m.a)(n.map((function(t){return t.visits})))),o=Math.max.apply(Math,Object(m.a)(n.map((function(t){return t.winrate})))),s=P(0,255,0).h,l=P(0,255,255).h,u=Object(c.a)(n.entries());try{for(u.s();!(i=u.n()).done;){var h=Object(k.a)(i.value,2),d=h[0],v=h[1],f=t[e.xyToPoint.apply(e,E(v.move))];f.winrate=(100*v.winrate).toFixed(1),f.playouts=v.visits;var p=f.playouts/r,y=Math.log(p),b=0===d?l:s*Math.max(0,y/3+1),g=(32+208*Math.max(0,y/5+1))/255,w=T(b,.75,.85);if(0===d)if(v.winrate<o)f.borderWidth="2px",f.borderColor="red";else{f.borderWidth="1px";var O={r:.7*(a=w).r,g:.7*a.g,b:.7*a.b};f.borderColor="rgba(".concat(O.r,",").concat(O.g,",").concat(O.b,",").concat(g,")")}else f.winrate===o.toFixed(1)&&(f.borderWidth="2px",f.borderColor="blue");f.fillColor="rgba(".concat(w.r,",").concat(w.g,",").concat(w.b,",").concat(g,")")}}catch(A){u.e(A)}finally{u.f()}}(t,this.props.model,this.props.candidates));var i={width:this.props.width,height:this.props.height};return o.a.createElement("div",{className:"go-board",style:i},o.a.createElement("div",{className:"go-board-content"},R(this.props.h,1).map((function(e){return o.a.createElement("div",{className:"go-row",key:e},R(1,n.props.w).map((function(i){return n.renderIntersection(t,i,e)})))}))))}},{key:"onMouseEnterIntersection",value:function(t,e){var n=S(t,e);this.props.candidates.map((function(t){return t.move})).includes(n)&&this.setState({candidate:n})}},{key:"onMouseLeaveIntersection",value:function(t,e){this.state.candidate&&this.setState({candidate:void 0})}}]),n}(o.a.Component),W=function(t){Object(p.a)(n,t);var e=Object(y.a)(n);function n(){return Object(d.a)(this,n),e.apply(this,arguments)}return Object(v.a)(n,[{key:"render",value:function(){var t=this,e="go-intersection";switch(this.props.stone){case"B":e+=" go-intersection-black";break;case"W":e+=" go-intersection-white"}var n,i={backgroundColor:this.props.backgroundColor},a={backgroundColor:this.props.fillColor,borderWidth:this.props.borderWidth,borderColor:this.props.borderColor};return o.a.createElement("div",{className:e,style:i,onClick:this.props.onClick,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,onTouchEnd:function(){t.onTouchEnd()}},o.a.createElement("div",{className:"go-intersection-number"},this.props.number),o.a.createElement("div",{className:"go-intersection-info",style:a},o.a.createElement("div",null,this.props.winrate),o.a.createElement("div",null,"number"===typeof this.props.playouts?(n=this.props.playouts)<1e3?Object(g.sprintf)("%d",n):n<1e4?Object(g.sprintf)("%.1fk",n/1e3):n<1e6?Object(g.sprintf)("%.0fk",n/1e3):n<1e7?Object(g.sprintf)("%.1fM",n/1e6):n<1e9?Object(g.sprintf)("%.0fM",n/1e6):Object(g.sprintf)("%.0G",n/1e9):this.props.playouts)))}},{key:"onTouchEnd",value:function(){setInterval(this.props.onMouseLeave,1e3)}}]),n}(o.a.PureComponent),Z=D,F=function(){function t(e,n,i){var a=this;Object(d.a)(this,t),this.socket=void 0,this.buffer=void 0,this.lastCommand=void 0,this.resolve=void 0,this.reject=void 0,this.LzAnalyzeHandler=void 0,this.kataAnalyzeHandler=void 0,this.buffer="",this.socket="katago"===e?window.Module.input:new WebSocket(e),this.socket.onopen=function(t){a.socket.onmessage=function(t){a.buffer+=t.data;var e=a.buffer.split("\n");a.buffer=e.pop();var n,i=Object(c.a)(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;a.process(r)}}catch(o){i.e(o)}finally{i.f()}},n&&n()},this.socket.onerror=function(t){console.log("onerror",t),i&&i(t)},this.socket instanceof WebSocket||setTimeout((function(){a.socket.onopen(new CustomEvent("open"))}),0),document.addEventListener("visibilitychange",(function(){"visible"===document.visibilityState?a.resume():a.suspend()}),!1)}return Object(v.a)(t,[{key:"_command",value:function(t){this.lastCommand=t,this.socket.send(t+"\n")}},{key:"command",value:function(t){var e=this;return new Promise((function(n,i){e.LzAnalyzeHandler=void 0,e.resolve=n,e.reject=i,e._command(t)}))}},{key:"play",value:function(){var t=Object(h.a)(u.a.mark((function t(e,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.command("play ".concat(e," ").concat(n));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"undo",value:function(){var t=Object(h.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.command("undo");case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"lzAnalyze",value:function(t,e){this.LzAnalyzeHandler=e,this._command("lz-analyze ".concat(t))}},{key:"kataAnalyze",value:function(t,e){this.kataAnalyzeHandler=e,this._command("kata-analyze ".concat(t," ownership true"))}},{key:"process",value:function(t){t.startsWith("=")?this.resolve&&(this.resolve(t),this.resolve=void 0):t.startsWith("?")&&this.reject&&(this.reject(t),this.reject=void 0),this.LzAnalyzeHandler&&this.parseLzAnalyze(t),this.kataAnalyzeHandler&&this.parseKataAnalyze(t)}},{key:"parseLzAnalyze",value:function(t){for(var e,n=/info move ([A-Z]\d{1,2}) visits (\d+) winrate (\d+) prior (-?\d+) lcb (-?\d+) order (\d+) pv ((:? ?[A-Z]\d{1,2})+)/g,i=[];null!=(e=n.exec(t));)i.push({move:e[1],visits:parseInt(e[2]),winrate:parseInt(e[3])/1e4,prior:parseInt(e[4]),lcb:parseInt(e[5]),order:parseInt(e[6]),pv:e[7].split(" ")});this.LzAnalyzeHandler(i)}},{key:"parseKataAnalyze",value:function(t){var e={info:[],ownership:[]};if(t.includes("info")){var n=t.trim().split("ownership"),i=Object(k.a)(n,2),a=i[0],r=i[1],o=a.trim().split("info");o.shift();var s,l=Object(c.a)(o);try{for(l.s();!(s=l.n()).done;){for(var u=s.value.trim().split(" "),h={};u.length>1;){var d=u.shift();switch(d){case"move":h[d]=u.shift();break;case"visits":h[d]=parseInt(u.shift());break;case"pv":h[d]=Object(m.a)(u),u.splice(0);break;default:h[d]=parseFloat(u.shift())}}"move"in h&&"visits"in h&&"winrate"in h&&"pv"in h?e.info.push(h):(console.log(h),console.log(t))}}catch(v){l.e(v)}finally{l.f()}null!=r&&(e.ownership=r.trim().split(" ").map(parseFloat)),this.kataAnalyzeHandler(e)}else this.kataAnalyzeHandler(e)}},{key:"suspend",value:function(){this.socket.send("\n")}},{key:"resume",value:function(){this.lastCommand&&this._command(this.lastCommand)}}]),t}();function L(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=document.createElement("script");n.src=t,n.onload=e,document.body.appendChild(n)}function H(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"black",n=document.getElementById("message");n.innerText=t,n.style.color=e}var N=function(t){Object(p.a)(n,t);var e=Object(y.a)(n);function n(t){var i;return Object(d.a)(this,n),(i=e.call(this,t)).size=void 0,i.byoyomi=void 0,i.gtp=void 0,i.size=19,i.byoyomi=3,i.state={percent:50,black:"",white:"",model:new B(i.size,0),history:[],candidates:[],ownership:[]},document.getElementById("sgf").addEventListener("paste",function(){var t=Object(h.a)(u.a.mark((function t(e){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=(e.clipboardData||window.clipboardData).getData("text"),"tmp.sgf",FS.writeFile("tmp.sgf",n),t.next=5,i.gtp.command("loadsgf ".concat("tmp.sgf"));case 5:a=B.fromSgf(n),i.setState({model:a}),i.kataAnalyze();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),!1),"katago"===i.props.gtp?"undefined"===typeof SharedArrayBuffer?(H("SharedArrayBuffer, which is necessary for KataGo, is not available. Trying to connect localhost websocket server...","yellow"),i.start("ws://localhost:5001")):(window.goAI=Object(f.a)(i),L("pre_pre.js",(function(){L("katago.js")}))):i.start(i.props.gtp),i}return Object(v.a)(n,[{key:"start",value:function(t){var e=this;try{this.gtp=new F(t,(function(){e.kataAnalyze()}),(function(t){H("failed to connect ".concat((null===t||void 0===t?void 0:t.target).url),"red")}))}catch(n){H(n.toString(),"red")}}},{key:"render",value:function(){var t=this,e="".concat(Math.min(window.innerWidth,window.innerHeight),"px");return o.a.createElement("div",null,o.a.createElement(b,{width:e,blackPercent:this.state.percent,blackInfo:this.state.black,whiteInfo:this.state.white}),o.a.createElement(Z,{width:e,height:e,w:this.size,h:this.size,candidates:this.state.candidates,model:this.state.model,onClickIntersection:function(e,n){var i;(null===(i=t.state.history[t.state.history.length-1])||void 0===i?void 0:i.point)===t.state.model.xyToPoint(e,n)?t.undo():t.play(e,n)}}))}},{key:"lzAnalyze",value:function(){var t=this;this.gtp.lzAnalyze(100,(function(e){var n=e[0],i=100*(1===t.state.model.turn?n.winrate:1-n.winrate);t.setState({candidates:e,percent:i,black:"".concat(i.toFixed(1),"%"),white:"".concat((100-i).toFixed(1),"%")})}))}},{key:"kataAnalyze",value:function(){var t=this;this.gtp.kataAnalyze(100,(function(e){if(0!==e.info.length){var n,i,a=e.info[0],r=100*(1===t.state.model.turn?a.winrate:1-a.winrate),o=(1===t.state.model.turn?a.scoreMean:1-a.scoreMean).toFixed(1),s=a.scoreStdev.toFixed(1);r>=50?(n="".concat(r.toFixed(1),"%(").concat(o,"\xb1").concat(s,")"),i="".concat((100-r).toFixed(1),"%")):(n="".concat(r.toFixed(1),"%"),i="".concat((100-r).toFixed(1),"%(").concat(-o,"\xb1").concat(s,")")),t.setState({candidates:e.info,ownership:e.ownership,percent:r,black:n,white:i})}}))}},{key:"play",value:function(){var t=Object(h.a)(u.a.mark((function t(e,n){var i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,i=this.state.model.turn,this.setState((function(t,i){var a=t.model.play(t.model.xyToPoint(e,n));return null!=a&&t.history.push(a),{model:t.model,history:t.history,candidates:[],ownership:[]}})),t.next=5,this.gtp.play(1===i?"black":"white",S(e,n));case 5:this.kataAnalyze(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,this,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}()},{key:"undo",value:function(){var t=Object(h.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,this.setState((function(t,e){var n=t.history.pop();return null!=n&&t.model.undoPlay(n),{model:t.model,history:t.history,candidates:[],ownership:[]}})),t.next=4,this.gtp.undo();case 4:this.kataAnalyze(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,this,[[0,7]])})));return function(){return t.apply(this,arguments)}}()}]),n}(o.a.Component),X=function(){var t="katago";if(window.location.search.startsWith("?")){var e,n=window.location.search.substr(1).split("&"),i=Object(c.a)(n);try{for(i.s();!(e=i.n()).done;){var a=e.value.split("=");"gtp"===a[0]&&(t=a[1])}}catch(r){i.e(r)}finally{i.f()}}return o.a.createElement("div",null,o.a.createElement(N,{gtp:t}))};n(25);Object(s.render)(o.a.createElement(X,null),document.getElementById("app-container")),function(t){if("serviceWorker"in navigator){if(new URL("/react-lizzie",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var e="".concat("/react-lizzie","/service-worker.js");i?(!function(t,e){fetch(t).then((function(n){var i=n.headers.get("content-type");404===n.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then((function(t){t.unregister().then((function(){window.location.reload()}))})):a(t,e)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(e,t),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://bit.ly/CRA-PWA")}))):a(e,t)}))}}()}},[[18,1,2]]]);
//# sourceMappingURL=main.0c126065.chunk.js.map